---
import Breadcrumb from '../molecules/Breadcrumb.astro';
import Sidebar from '../organisms/Sidebar.astro';
import BaseTemplate from './BaseTemplate.astro';

interface Props {
  title: string;
  description?: string;
  breadcrumbs?: { label: string; href: string }[];
}

const { title, description, breadcrumbs } = Astro.props;
---

<BaseTemplate title={title} description={description}>
  <div class="min-h-screen flex">
    <Sidebar />

    <!-- Main content area -->
    <div class="flex-1 lg:ml-64 flex flex-col min-h-screen">
      <!-- Header bar -->
      <header class="sticky top-0 z-30 flex items-center h-14 px-4 bg-[var(--color-surface)] border-b border-[var(--color-border)]">
        <!-- Mobile hamburger -->
        <button
          id="sidebar-toggle"
          class="lg:hidden mr-3 p-1.5 rounded-md text-[var(--color-text-muted)] hover:bg-[var(--color-surface-hover)]"
          aria-label="Toggle sidebar"
        >
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="1.5">
            <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5" />
          </svg>
        </button>

        <!-- Page title -->
        <h1 class="text-lg font-semibold text-[var(--color-text)] truncate">{title}</h1>
      </header>

      <!-- Main scrollable content -->
      <main data-pagefind-body class="flex-1 overflow-y-auto p-4 lg:p-6">
        {breadcrumbs && breadcrumbs.length > 0 && (
          <Breadcrumb segments={breadcrumbs} />
        )}
        {description && (
          <p class="mb-6 text-[var(--color-text-muted)]">{description}</p>
        )}
        <slot />
      </main>
    </div>
  </div>
</BaseTemplate>
